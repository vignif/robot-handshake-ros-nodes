close all;
clear all;



FSR= zeros(1200, 1);
force=zeros(1200, 1);
avg=[];
for name={'FSRfromDummy_oneside1'}
    clear A;
    sumA=zeros(0,2);

   formatSpec='%s.csv';
   filename=sprintf(formatSpec,name{1});
   A=csvread(filename);
   if size(sumA,1)<size(A,1)
       sumA=zeros(size(A));
   end
   fsr = A(:,1);
   force = A(:,2);

end
% fsr=fsr/1.422 - 19.47/1.422; %dummy_grams
% fsr=fsr/166.6896 - 9.7041/166.6896; %%dummy_3
% fsr=fsr/149.4 - 1495/149.4 %%dummy5
% fsr=fsr/116.5 - 1644-116.5 %%dummy6

eps=0.1;
for i=1:size(fsr,1)
if force(i) <= eps
    force(i) = eps;
end
if fsr(i) <= eps
fsr(i) =eps;
end
end

for i=min(fsr):max(fsr)
    find(force(i))
end

% 
% 
% for i=1:max(force)
%     temp = 0;
%     c=0;
%    index= find(force==i);
%     for j=min(index):max(index)
%         temp= temp+fsr(j);
%         c=c+1;
%         j;
%     end
%     avg(i)=temp/c;
% end

%% cut high forces

maxF=80;
[sort_force,indforce]=sort(force);
[sort_fsr,indfsr]=sort(fsr);
cut_force=[];
cut_fsr=[];

IdxMAX=find(force>maxF);
IdxMIN=find(force<=maxF);
% 
% for i=min(IdxMAX):max(IdxMAX)
%    cut_force(i)=force(i);
%    cut_fsr(i)=fsr(i);
% end
% 
% for i=min(IdxMIN):max(IdxMIN)
%     cut_force(i)=force(i);
%    cut_fsr(i)=fsr(i);
% end

scatter(fsr,force); ylabel('Force (N)'); xlabel('sumofFSR'); title('Calibration of FSR from loadcell');
% hold on
% scatter(cut_force,cut_fsr); xlabel('Force (N)'); ylabel('sumofFSR'); title('Calibration of FSR from loadcell');
